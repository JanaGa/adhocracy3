<div class="comment" data-ng-switch="viewmode" data-ng-if="data">
    <div class="discussion-header">
        <!-- Circle with bubble -->
        <span class="discussion-header-creator">
            <adh-user-meta data-path="{{data.creator}}"></adh-user-meta>
        </span>
        <span class="discussion-header-date">
            <adh-time data-datetime="{{data.modificationDate}}"></adh-time>
        </span>
        <!-- Bubble -->
        {{data.commentCount}}
    </div>

    <div class="comment-title">
        <adh-user-meta data-path="{{data.creator}}"></adh-user-meta>
    </div>
    <div data-ng-switch-when="edit">
        <div class="form-error" data-ng-repeat="error in errors">
            <p>{{error}}</p>
        </div>
    </div>
    <div class="comment-content">
        <textarea data-ng-switch-when="edit" data-ng-model="data.content"></textarea>
        <div data-ng-switch-default="">{{data.content}}</div>
    </div>
    <div class="comment-meta">
        <adh-time data-datetime="{{data.modificationDate}}"></adh-time>
        <a href="" data-ng-switch-default="" data-ng-click="edit()">Edit</a>
        <a href="" data-ng-switch-default="">Add Comment</a>
        <a href="" data-ng-switch-when="edit" data-ng-click="save()">Save</a>
        <a href="" data-ng-switch-when="edit" data-ng-click="cancel()">Cancel</a>
        <span class="comment-count">{{data.commentCount}} <!-- bubble --></span>
    </div>

    <adh-comment-listing data-path="{{path}}">
        <div data-ng-switch="transclusionId">
            <adh-comment-create
                data-refers-to="{{path}}"
                data-pool-path="{{poolPath}}"
                data-on-new="onCreate"
                data-on-cancel="hideCreateForm"
                data-ng-switch-when="create-form-id">
            </adh-comment-create>
            <adh-comment-detail
                data-path="element"
                data-viemode="'list'"
                data-ng-switch-when="element-id">
            </adh-comment-detail>
        </div>
    </adh-comment-listing>
</div>
