*** Settings ***
Documentation     A resource file with reusable keywords and variables.
...
...               (Detailed summary missing.)
...               Hint: Instead of using a headless browser, you can simply run this:
...                 nohup Xvfb :100 -ac > /dev/null 2> /dev/null &
...                 DISPLAY=:100 pybot unit
Library           Selenium2Library

*** Variables ***
${SERVER}         localhost:8000
${BROWSER}        Firefox
${DELAY}          0
${BROWSER LAG}    0.7 secs
${SETUP URL}      http://${SERVER}/f/proposal_workbench_setup.html
${PAGE URL}       http://${SERVER}/f/proposal_workbench.html
${PAR NEW}        Ihm ist, als ob es tausend Stäbchen gäbchen,

*** Keywords ***
Setup Proposal DB
    Open Browser    ${SETUP URL}    ${BROWSER}

Open Browser To Proposal Workbench
    Open Browser    ${PAGE URL}    ${BROWSER}
    Maximize Browser Window
    Set Selenium Speed    ${DELAY}
    Proposal Workbench Should Be Open

Proposal Workbench Should Be Open
    Title Should Be    Proposal Workbench
    Sleep  ${BROWSER LAG}
    Element Should Be Visible     sizzle=#proposal_workbench_directory
    Page Should Contain Element   sizzle=#proposal_workbench_detail
    Page Should Contain Element   sizzle=#proposal_workbench_discussion

Go To Proposal Workbench
    Go To    ${PAGE URL}
    Proposal Workbench Should Be Open

Open Proposal Detail View
    Click Element               sizzle=#proposal_workbench_directory a
    Sleep  ${BROWSER LAG}
    Element Should Be Visible   sizzle=#proposal_workbench_detail h3

Open Proposal Editor
    Element Should Be Visible          sizzle=#proposal_workbench_detail .edit_button
    Click Element                      sizzle=#proposal_workbench_detail .edit_button
    Wait Until Page Contains Element   sizzle=#proposal_workbench_detail .save_button  timeout=3
    Element Should Be Visible          sizzle=#proposal_workbench_detail .save_button

Edit Proposal
    Input Text                         sizzle=#proposal_workbench_detail .document_paragraph  ${PAR NEW}
    Click Element                      sizzle=#proposal_workbench_detail .save_button
    Wait Until Page Contains Element   sizzle=#proposal_workbench_detail .edit_button  timeout=3
    (read document from server via ajax)
    (check that string is the one we just wrote)
