<div class="comment {{ selectedState }}" data-ng-switch="mode" data-ng-if="data">
    <div class="comment-main">
        <div class="comment-header">
            <span class="comment-header-creator">
                <adh-user-meta data-path="{{data.creator}}"></adh-user-meta>
            </span>
            <span class="comment-header-date">
                <adh-time data-datetime="data.creationDate"></adh-time>.
            </span>
        </div>

        <form class="comment-children-edit-form" data-ng-switch-when="1" data-ng-submit="submit()">
            <div class="form-error" data-ng-repeat="error in errors">
                <p>{{ error | translate }}</p>
            </div>
            <textarea class="comment-edit-form-text" data-msd-elastic="" data-ng-model="data.content"></textarea>
            <footer class="form-footer">
                <input type="submit" class="button-cta m-narrow m-variant form-footer-button-cta" value="{{ 'TR__SAVE' | translate }}" />
                <a href="" class="button m-menu-action" data-ng-click="cancel()" data-ng-if="!hideCancel">{{ "TR__CANCEL" | translate }}</a>
            </footer>
        </form>
        <div class="comment-content" data-ng-switch-default="">
            {{data.content}}
        </div>
        <div class="comment-footer-links">
            <a href=""
                data-ng-if="poolOptions.POST"
                data-ng-click="createComment()"
                class="button m-menu-action">
                {{ 'TR__REPLY' | translate }}
            </a>
            <a href=""
                data-ng-if="commentItemOptions.POST"
                data-ng-click="edit()"
                class="button m-menu-action">
                {{ 'TR__EDIT' | translate }}

            </a>
            <a href=""
                data-ng-click="delete()"
                data-ng-if="versionOptions.hide"
                class="button m-menu-action">
                {{ 'TR__DELETE' | translate }}
            </a>
        </div>
    </div>

    <div class="comment-children-create-form" data-ng-if="show.createForm">
        <adh-resource-wrapper
            data-on-submit="afterCreateComment()"
            data-on-cancel="cancelCreateComment()">
            <adh-comment-create
                data-path="{{createPath}}"
                data-mode="edit"
                data-refers-to="{{data.path}}"
                data-pool-path="{{data.replyPoolPath}}">
            </adh-comment-create>
        </adh-resource-wrapper>
    </div>
    <div class="comment-children">
        <adh-resource-wrapper
            data-ng-repeat="comment in data.comments | orderBy:frontendOrderPredicate:frontendOrderReverse">
            <adh-comment-resource
                data-path="{{comment}}"
                data-mode="display"
                data-frontend-order-predicate="frontendOrderPredicate"
                data-frontend-order-reverse="frontendOrderReverse"
                data-update-listing="update">
            </adh-comment-resource>
        </adh-resource-wrapper>
    </div>
</div>
