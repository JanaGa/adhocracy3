<adh-spaces>
    <div data-adh-moving-columns="" data-space="content" class="moving-columns" data-ng-show="currentSpace === 'content'">
        <div class="moving-column moving-column-structure">
            <div data-ng-if="view === 'create_proposal'">
                <div class="moving-column-menu placeholder"></div>
                <div class="moving-column-body" data-du-scroll-container="">
                    <adh-resource-wrapper data-on-submit="goToListing()" data-on-cancel="goToListing()">
                        <adh-mercator-proposal-create
                            data-path="@preliminary"
                            data-mode="edit"
                            data-pool-path="{{path}}">
                        <adh-mercator-proposal-create>
                    </adh-resource-wrapper>
                </div>
            </div>
            <div data-ng-if="view !== 'create_proposal'">
                <div class="moving-column-menu placeholder">
                    <a href="" data-ng-click="proposalListingData.showFacets = !proposalListingData.showFacets">{{ "filters" | translate }}</a>
                </div>
                <div
                    class="moving-column-sidebar"
                    data-ng-class="{'is-visible': proposalListingData.showFacets}"
                    aria-visible="{{proposalListingData.showFacets}}">
                    <adh-facets
                        data-update="proposalListingData.update"
                        data-facets="proposalListingData.facets">
                    </adh-facets>
                </div>
                <div class="moving-column-body" data-du-scroll-container="">
                    <adh-mercator-proposal-listing
                        data-path="{{path}}"
                        data-content-type="{{contentType}}"
                        data-update="proposalListingData.update"
                        data-facets="proposalListingData.facets"
                        data-sort="proposalListingData.sort"
                    >
                    </adh-mercator-proposal-listing>
                </div>
            </div>
        </div>
        <div class="moving-column moving-column-content">
            <div data-ng-if="view === 'edit'">
                <div class="moving-column-menu placeholder"></div>
                <div class="moving-column-body" data-du-scroll-container="">
                    <adh-resource-wrapper
                        data-on-submit="goToProposal(proposalUrl)"
                        data-on-cancel="goToProposal(proposalUrl)">
                        <adh-mercator-proposal-create
                            data-ng-if="proposalUrl"
                            data-path="{{proposalUrl}}"
                            data-mode="edit"
                            data-pool-path="{{path}}">
                        </adh-mercator-proposal-create>
                    </adh-resource-wrapper>
                </div>
            </div>
            <div data-ng-if="view !== 'edit'">
                <div class="moving-column-menu">
                    <!-- FIXME: permission check -->
                    <a href="{{ proposalUrl | adhResourceUrl:'edit' }}">{{ "edit" | translate }}</a>
                </div>
                <div class="moving-column-body" data-du-scroll-container="">
                    <adh-recompile-on-change data-value="{{proposalUrl}}" data-key="proposalUrl">
                        <adh-resource-wrapper>
                            <adh-mercator-proposal-detail-view data-ng-if="proposalUrl" data-path="{{proposalUrl}}"></adh-mercator-proposal-detail-view>
                        </adh-resource-wrapper>
                    </adh-recompile-on-change>
                </div>
            </div>
        </div>
        <div class="moving-column moving-column-content2">
            <div class="moving-column-menu placeholder"></div>
            <div class="moving-column-body" data-du-scroll-container="">
                <adh-comment-listing data-ng-if="commentableUrl" data-path="{{commentableUrl}}">
            </div>
        </div>
    </div>
    <div data-adh-moving-columns="" data-space="content" class="moving-columns" data-ng-show="currentSpace === 'user'">
        <div class="moving-column moving-column-structure">
            <div class="moving-column-menu placeholder"></div>
            <div class="moving-column-body" data-du-scroll-container="">
                <adh-list-users></adh-list-users>
            </div>
        </div>
        <div class="moving-column moving-column-content">
            <div class="moving-column-menu placeholder"></div>
            <div class="moving-column-body" data-du-scroll-container="" adh-user-profile>
                <section
                    data-adh-user-profile=""
                    data-itemscope=""
                    data-itemtype="http://schema.org/Person"
                    class="mercator-user-profile">
                        <h1 data-itemprop="name">{{user.data.name}}</h1>
                        <a href="mailto:{{user.data.email}}" data-itemprop="email">{{user.data.email}}</a>
                    <section
                        data-itemscope=""
                        data-itemtype="http://schema.org/Organization"
                        data-itemprop="organization"
                        class="user-profile-org-details">
                            <h2 data-itemprop="name">FIXME: ORGANIZATION NAME</h2>
                            <a href="mailto:FIXME" data-itemprop="email">FIXME: @FIX.ME</a><br/>
                            <a href="FIXME" data-itemprop="url">www.fix.me</a><br/>
                            <span data-itemprop="location">FIXME: LOCATION</span>
                    </section>
                </section><!-- /schema -->
                <section class="mercator-user-profile-proposal-list">
                    <h3>{{user.data.name}}{{ "'s" | translate }} {{ "proposals" | translate }}</h3>
                    <adh-mercator-proposal-listing
                        data-path="{{path}}"
                        data-content-type="{{contentType}}"
                        data-update="proposalListingData.update"
                        data-facets="proposalListingData.facets"
                        data-sort="proposalListingData.sort"
                    >
                    </adh-mercator-proposal-listing>
                </section><!-- /.user-profile-proposal-list -->
            </div>
        </div>
    </div>
</adh-spaces>
