<div class="user-profile-image-edit" ng-class="{'user-profile-image-edit-uploading': isUploading}">
    <adh-recompile-on-change
        data-value="{{isUploading}}">
        <adh-user-profile-image
            ng-hide="isImageMissing || isUploading"
            data-path="{{path}}"
            data-is-image-missing="isImageMissing"
        ></adh-user-profile-image>
    </adh-recompile-on-change>
    <!-- FIXME should be shown on hover over the user image -->
    <a href="" class="button user-profile-image-edit-button"
        data-ng-class="{ 'user-profile-image-edit-button-force-visible': isImageMissing }"
        data-ng-if="userOptions.PUT && ! isUploading"
        data-ng-click="triggerUpload()"
    ><span>Edit Profile Image<!-- FIXME translate --></span></a>
    <adh-upload-image
        data-ng-if="isUploading"
        data-pool-path="{{path|adhParentPath}}"
        data-path="{{path}}"
        data-did-complete-upload="didUpload()"
        data-did-cancel-upload="didUpload()"
    ></adh-upload-image>
</div>
